# 第三章 链路层

## 3.7 环回

目的：提供客户机通过Internet协议（例如TCI/IP）与同一台计算机的服务通信的能力。

环回--通常实验一个虚拟的环回网络接口来实现。就像一个真正的网络接口，实际上是一个由操作系统提供的专用软件，可通过TCP/IP与同一主机的其他部分通信。

可以想象传输层监测到另一端是一个环回地址，并跳过某些传输层和所有网络层逻辑，但在大多数实现在传输层和网络层对数据执行完整的处理逻辑，并仅在数据报离开网络层时将其回送给网络层协议栈，不经过链路层，没有硬件开销。

## 3.8 MTU和路径MTU

以太网有效载荷的字节数通常被限制为1500，PPP通常采用相同大小以和以太网保持兼容，链路层这种特征被称为**最大传输单元（MTU）**。

如果IP需要发送一个数据报，并且大于MTU，则IP通过分片将数据报分为较小部分以适配MTU。（IP层进行分片）

链路上最小MTU称为**路径MTU**。

* 任何两台机器之间路径MTU不是一成不变
* 路径MTU通常不对称

## 隧道

虚拟专用网络（VPN）提供两台计算机通过Internet或其他网络建立一条虚拟链路的服务，实现这类服务最常用的方法称为**隧道**。

隧道是在高层（或同等层）分组中携带低层数据。例如，在IPv4或IPv6分组中携带IPv4数据，在一个TCP、IPv4或IPv6分组中携带以太网数据。隧道转变了严格的分层思想，允许形成覆盖网络（实际是虚拟链路而不是物理连接的网络）。

建立隧道的三个常用协议：**通用路由封装（GRE）**、Mircrosoft专用的**点对点隧道协议（PPPTP）**和**第二层隧道协议（L2TP）**。





























