# 第15章 进程池和线程池
动态创建子进程（或子线程）实现并发服务器的缺点：
1. 动态创建进程（或线程）比较耗时，将导致较慢的客户响应。
2. 动态创建的子进程（或子线程）通常只用来为一个客户服务（除非进行特殊处理），这将导致系统上存在大量的细微进程（或线程）。进程（或线程）间的切换将消耗大量时间。
3. 动态创建的子进程是当前进程的完整镜像。当前进程必须谨慎地管理其分配的资源，否则子进程可能会复制这些资源，而导致系统可用资源急剧减少，进而影响服务器性能。
## 15.1 进程池和线程池概述
进程池（线程池）是由服务器预先创建的一组子进程（子线程），这些子进程数目在3~10之间（典型值），线程池中线程数量应该和CPU数量差不多。当有新任务到来时，主进程（主线程）通过某种方式选择进程池（线程池）中的某一个子进程（子线程）来为之服务。选择方式有两种：
1. 主进程（主线程）通过某种算法来主动选择子进程。最简单、最常用的算法是随机算法和Round Robin（轮流选取）算法，但更优秀、更智能的算法将对任务进行负载均衡，从而减轻服务器的整体压力。
2. 主进程（主线程）和所有子进程（子线程）通过一个共享的工作队来同步，子进程（子线程）都睡眠在该工作队列上。
## 15.2 处理多客户


